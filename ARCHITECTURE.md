# ğŸ—ï¸ System Architecture - Fcilite Electro

## ğŸ“ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                         â”‚
â”‚                     http://localhost:3000                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/HTTPS
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEXT.JS FRONTEND                          â”‚
â”‚                    (React + TypeScript)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Pages:                                             â”‚    â”‚
â”‚  â”‚  â€¢ Login (/login)                                   â”‚    â”‚
â”‚  â”‚  â€¢ Dashboard (/dashboard)                           â”‚    â”‚
â”‚  â”‚  â€¢ Clients (/dashboard/clients)                     â”‚    â”‚
â”‚  â”‚  â€¢ Products (/dashboard/products)                   â”‚    â”‚
â”‚  â”‚  â€¢ Files (/dashboard/files)                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Services:                                          â”‚    â”‚
â”‚  â”‚  â€¢ API Client (Axios)                               â”‚    â”‚
â”‚  â”‚  â€¢ Authentication (JWT + Cookies)                   â”‚    â”‚
â”‚  â”‚  â€¢ Utils (formatters, helpers)                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ REST API (JSON)
                         â”‚ Authorization: Bearer <JWT>
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   EXPRESS.JS BACKEND                         â”‚
â”‚                    (Node.js + TypeScript)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Middleware:                                        â”‚    â”‚
â”‚  â”‚  â€¢ CORS                                             â”‚    â”‚
â”‚  â”‚  â€¢ JWT Authentication                               â”‚    â”‚
â”‚  â”‚  â€¢ Role Authorization                               â”‚    â”‚
â”‚  â”‚  â€¢ Request Logging                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Routes:                                            â”‚    â”‚
â”‚  â”‚  â€¢ /api/auth/* â†’ authController                     â”‚    â”‚
â”‚  â”‚  â€¢ /api/customers/* â†’ customerController            â”‚    â”‚
â”‚  â”‚  â€¢ /api/products/* â†’ productController              â”‚    â”‚
â”‚  â”‚  â€¢ /api/files/* â†’ fileController                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Controllers:                                       â”‚    â”‚
â”‚  â”‚  â€¢ Business Logic                                   â”‚    â”‚
â”‚  â”‚  â€¢ Request Validation                               â”‚    â”‚
â”‚  â”‚  â€¢ Response Formatting                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ SQL Queries
                         â”‚ (Parameterized)
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   POSTGRESQL DATABASE                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  users   â”‚  â”‚customers â”‚  â”‚ products â”‚  â”‚  files   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ id       â”‚  â”‚ id       â”‚  â”‚ id       â”‚  â”‚ id       â”‚  â”‚
â”‚  â”‚ email    â”‚  â”‚ name     â”‚  â”‚ name     â”‚  â”‚ number   â”‚  â”‚
â”‚  â”‚ password â”‚  â”‚ phone    â”‚  â”‚ category â”‚  â”‚ customer â”‚  â”‚
â”‚  â”‚ role     â”‚  â”‚ email    â”‚  â”‚ price    â”‚  â”‚ product  â”‚  â”‚
â”‚  â”‚ ...      â”‚  â”‚ ...      â”‚  â”‚ ...      â”‚  â”‚ status   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  Relationships:                                              â”‚
â”‚  â€¢ files â†’ customers (foreign key)                          â”‚
â”‚  â€¢ files â†’ products (foreign key)                           â”‚
â”‚  â€¢ All â†’ users (created_by foreign key)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request Flow

### Example: User Creates a New Customer

```
1. USER ACTION
   â””â”€> Fills form in /dashboard/clients
       Clicks "Create" button

2. FRONTEND (Next.js)
   â””â”€> Validates form data
       Calls customersAPI.create(data)
       Shows loading state

3. API CLIENT (Axios)
   â””â”€> POST http://localhost:5000/api/customers
       Headers: {
         Authorization: Bearer <JWT token>,
         Content-Type: application/json
       }
       Body: { full_name, phone, email, ... }

4. BACKEND - Middleware
   â””â”€> CORS check âœ“
       JWT authentication âœ“
       Extracts user ID from token

5. BACKEND - Route
   â””â”€> POST /api/customers
       Routes to customerController.create()

6. BACKEND - Controller
   â””â”€> Validates required fields
       Adds created_by (from JWT)
       Prepares SQL query

7. DATABASE
   â””â”€> INSERT INTO customers (...)
       Returns new customer record

8. BACKEND - Response
   â””â”€> Status: 201 Created
       Body: { id, full_name, phone, ... }

9. FRONTEND - Update
   â””â”€> Receives response
       Updates customer list
       Closes modal
       Shows success message

10. USER
    â””â”€> Sees new customer in list
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. User enters credentials
       â”‚    email + password
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Login Page         â”‚
â”‚  (/login)            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. POST /api/auth/login
       â”‚    { email, password }
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Controller     â”‚
â”‚                      â”‚
â”‚  â€¢ Find user by emailâ”‚
â”‚  â€¢ Verify password   â”‚
â”‚    (bcrypt.compare)  â”‚
â”‚  â€¢ Generate JWT      â”‚
â”‚    (jwt.sign)        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Response
       â”‚    { token, user }
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend           â”‚
â”‚                      â”‚
â”‚  â€¢ Store token       â”‚
â”‚    (Cookie)          â”‚
â”‚  â€¢ Store user data   â”‚
â”‚    (Cookie)          â”‚
â”‚  â€¢ Redirect to       â”‚
â”‚    /dashboard        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. All subsequent requests
       â”‚    Authorization: Bearer <token>
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Middleware     â”‚
â”‚                      â”‚
â”‚  â€¢ Extract token     â”‚
â”‚  â€¢ Verify JWT        â”‚
â”‚  â€¢ Decode user info  â”‚
â”‚  â€¢ Attach to request â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Request proceeds
       â”‚    with user context
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Controller         â”‚
â”‚   (with req.user)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Schema Relationships

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    users     â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ id (PK)      â”‚
                    â”‚ email        â”‚
                    â”‚ password_hashâ”‚
                    â”‚ role         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ (created_by FK)               â”‚
                    â”‚                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    customers        â”‚    â”‚      products          â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ id (PK)             â”‚    â”‚ id (PK)                â”‚
        â”‚ full_name           â”‚    â”‚ name                   â”‚
        â”‚ phone               â”‚    â”‚ category               â”‚
        â”‚ email               â”‚    â”‚ price                  â”‚
        â”‚ created_by (FK)     â”‚    â”‚ stock_quantity         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ created_by (FK)        â”‚
                  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                          â”‚
                  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                  â”‚    â”‚                    â”‚â”‚
                  â””â”€â”€â”€â”€â–º  financing_files   â—„â”˜
                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                       â”‚ id (PK)            â”‚
                       â”‚ file_number (UNIQUE)â”‚
                       â”‚ customer_id (FK) â”€â”€â”˜
                       â”‚ product_id (FK) â”€â”€â”€â”˜
                       â”‚ total_amount       â”‚
                       â”‚ down_payment       â”‚
                       â”‚ remaining_amount   â”‚
                       â”‚ monthly_installmentâ”‚
                       â”‚ status             â”‚
                       â”‚ created_by (FK) â”€â”€â”€â”˜
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Frontend Component Structure

```
src/app/
â”‚
â”œâ”€â”€ layout.tsx (Root Layout)
â”‚   â””â”€> Metadata, global styles
â”‚
â”œâ”€â”€ page.tsx (Root Page)
â”‚   â””â”€> Redirects to /login
â”‚
â”œâ”€â”€ globals.css
â”‚   â””â”€> Tailwind CSS, custom styles
â”‚
â”œâ”€â”€ login/
â”‚   â””â”€â”€ page.tsx
â”‚       â””â”€> Login form
â”‚           Email + Password
â”‚           Calls authAPI.login()
â”‚           Redirects to /dashboard
â”‚
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx (Dashboard Layout)
    â”‚   â”œâ”€> Sidebar navigation
    â”‚   â”œâ”€> User profile display
    â”‚   â”œâ”€> Logout button
    â”‚   â””â”€> Checks authentication
    â”‚
    â”œâ”€â”€ page.tsx (Dashboard Home)
    â”‚   â”œâ”€> Statistics cards
    â”‚   â”œâ”€> File status overview
    â”‚   â””â”€> Quick action buttons
    â”‚
    â”œâ”€â”€ clients/
    â”‚   â””â”€â”€ page.tsx
    â”‚       â”œâ”€> Customer table
    â”‚       â”œâ”€> Search bar
    â”‚       â”œâ”€> Create/Edit modal
    â”‚       â””â”€> Delete confirmation
    â”‚
    â”œâ”€â”€ products/
    â”‚   â””â”€â”€ page.tsx
    â”‚       â”œâ”€> Product grid
    â”‚       â”œâ”€> Category filter
    â”‚       â”œâ”€> Create/Edit modal
    â”‚       â””â”€> Stock management
    â”‚
    â””â”€â”€ files/
        â””â”€â”€ page.tsx
            â”œâ”€> Files list
            â”œâ”€> Status filter
            â”œâ”€> Create file modal
            â”œâ”€> Status update modal (Admin)
            â””â”€> File details display
```

---

## ğŸ”’ Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: Network Security                          â”‚
â”‚  â€¢ CORS (Cross-Origin Resource Sharing)            â”‚
â”‚  â€¢ HTTPS in production                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: Authentication                             â”‚
â”‚  â€¢ JWT tokens (JSON Web Tokens)                    â”‚
â”‚  â€¢ Token expiration (7 days)                       â”‚
â”‚  â€¢ Secure password hashing (bcrypt)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: Authorization                              â”‚
â”‚  â€¢ Role-based access control                       â”‚
â”‚  â€¢ Admin vs POS permissions                        â”‚
â”‚  â€¢ Middleware checks on routes                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: Data Security                              â”‚
â”‚  â€¢ SQL injection prevention (parameterized queries)â”‚
â”‚  â€¢ Input validation                                â”‚
â”‚  â€¢ Sensitive data encryption                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 5: Environment Security                       â”‚
â”‚  â€¢ .env files (not in git)                         â”‚
â”‚  â€¢ Secret management                               â”‚
â”‚  â€¢ Database credentials protection                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow for File Creation

```
User fills form                    Backend receives
    â†“                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Customer: John Doe â”‚         â”‚ Validate input       â”‚
â”‚ Product: TV 55"    â”‚   â†’     â”‚  â€¢ customer_id existsâ”‚
â”‚ Amount: 120,000    â”‚         â”‚  â€¢ product_id exists â”‚
â”‚ Down: 30,000       â”‚         â”‚  â€¢ amounts are valid â”‚
â”‚ Period: 12 months  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Calculate values     â”‚
                              â”‚  â€¢ File number       â”‚
                              â”‚  â€¢ Remaining amount  â”‚
                              â”‚  â€¢ Monthly payment   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Insert to database   â”‚
                              â”‚  status: under_reviewâ”‚
                              â”‚  created_by: user.id â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Return complete file â”‚
                              â”‚  with all details    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
User sees new file                Frontend updates
File #2024000001              List refreshed, modal closes
Status: Under Review          Success message displayed
```

---

## ğŸ¯ Technology Stack Details

### Frontend Stack
```
Next.js 15
  â”œâ”€> React 18 (UI Components)
  â”œâ”€> TypeScript (Type Safety)
  â”œâ”€> Tailwind CSS (Styling)
  â”‚   â”œâ”€> Utility classes
  â”‚   â””â”€> Custom theme
  â”œâ”€> Axios (HTTP Client)
  â”œâ”€> js-cookie (Token Storage)
  â””â”€> lucide-react (Icons)
```

### Backend Stack
```
Node.js
  â””â”€> Express.js
      â”œâ”€> TypeScript (Type Safety)
      â”œâ”€> PostgreSQL (pg)
      â”œâ”€> bcryptjs (Password Hashing)
      â”œâ”€> jsonwebtoken (JWT)
      â”œâ”€> cors (CORS Middleware)
      â”œâ”€> morgan (Logging)
      â””â”€> dotenv (Environment Variables)
```

### Database
```
PostgreSQL
  â”œâ”€> UUID primary keys
  â”œâ”€> Timestamps (created_at, updated_at)
  â”œâ”€> Foreign key constraints
  â”œâ”€> Indexes for performance
  â””â”€> Triggers for auto-updates
```

---

## ğŸš€ Deployment Architecture (Production)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FRONTEND (Vercel/Netlify)         â”‚
â”‚  â€¢ Static files + Server-side rendering   â”‚
â”‚  â€¢ CDN distribution                       â”‚
â”‚  â€¢ HTTPS automatic                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ HTTPS API calls
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      BACKEND (VPS/Heroku/DigitalOcean)    â”‚
â”‚  â€¢ Node.js process                        â”‚
â”‚  â€¢ PM2 process manager                    â”‚
â”‚  â€¢ Nginx reverse proxy                    â”‚
â”‚  â€¢ SSL certificates                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ Encrypted connection
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DATABASE (Managed PostgreSQL)           â”‚
â”‚  â€¢ RDS / Managed Database Service         â”‚
â”‚  â€¢ Automated backups                      â”‚
â”‚  â€¢ Connection pooling                     â”‚
â”‚  â€¢ SSL/TLS encryption                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides:
- âœ… Scalability
- âœ… Security
- âœ… Maintainability
- âœ… Performance
- âœ… Reliability

**See PROJECT_SUMMARY.md for complete feature list**
